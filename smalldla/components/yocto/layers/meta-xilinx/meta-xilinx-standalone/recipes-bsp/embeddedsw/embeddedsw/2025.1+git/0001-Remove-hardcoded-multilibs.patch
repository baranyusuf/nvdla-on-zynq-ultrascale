From 0bedf114eee7740656e439f6e2f065e27722e222 Mon Sep 17 00:00:00 2001
From: Mark Hatle <mark.hatle@amd.com>
Date: Tue, 3 Dec 2024 18:27:32 -0700
Subject: [PATCH] Remove hardcoded multilibs

Signed-off-by: Mark Hatle <mark.hatle@amd.com>
---
 lib/sw_apps/asufw/src/Makefile | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

diff --git a/lib/sw_apps/asufw/src/Makefile b/lib/sw_apps/asufw/src/Makefile
index ac7436d157..65254c443b 100644
--- a/lib/sw_apps/asufw/src/Makefile
+++ b/lib/sw_apps/asufw/src/Makefile
@@ -9,10 +9,11 @@ CC_FLAGS := -MMD -MP -mabi=ilp32 -march=rv32imac_zicsr_zifencei
 CFLAGS := -O2 -flto -ffat-lto-objects
 
 SYSROOT = $(shell $(CC) -print-sysroot)
-MULTILIB = $(SYSROOT)/usr/lib/rv32imc/ilp32
-
-LN_FLAGS = -nostartfiles -L$(MULTILIB) $(MULTILIB)/crt0.o $(MULTILIB)/crtbegin.o $(MULTILIB)/crtend.o $(MULTILIB)/crti.o $(MULTILIB)/crtn.o -Wl,--start-group,-lxil,-lxilasu,-lgcc,-lc,--end-group       -Wl,--no-warn-rwx-segment,--gc-sections
+MULTILIB = 
+LIBDIR = $(SYSROOT)/usr/lib${MULTILIB}
 
+LN_FLAGS = -nostartfiles -L$(LIBDIR) $(LIBDIR)/crt0.o $(LIBDIR)/crtbegin.o $(LIBDIR)/crtend.o $(LIBDIR)/crti.o $(LIBDIR)/crtn.o -Wl,--start-group,-lxil,-lxilasu,-lgcc,-lc,--end-group       -Wl,--no-warn-rwx-segment,--gc-sections
+ 
 c_SOURCES := $(wildcard *.c) $(wildcard */*.c)
 S_SOURCES := $(wildcard *.S) $(wildcard */*.S)
 s_SOURCES := $(wildcard *.s) $(wildcard */*.s)
-- 
2.34.1

